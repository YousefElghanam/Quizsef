{% extends "layout.html" %}

{% block title %}
    Exam
{% endblock %}

{% block main %}
    <h5>Answer Questions</h5>
    <h5>Click one of the answers to copy it</h5>
    <form action="/{{teacherid}}/{{examname}}" method="post">
        {% for row in range(exam[0]["nquestions"]) %}
            <textarea readonly cols="70" class="form-control stretchsize mx-auto w-auto" id="question{{row+1}}" name="question{{row+1}}" type="text">{{ exam[0]["questions"][row] }}</textarea>
            <div class="answerrow">
                <div class="answer">
                    <textarea onclick="copy('answer{{row+1}}-1')" readonly cols="31" class="form-control mx-auto w-auto" id="answer{{row+1}}-1" name="answer{{row+1}}-1" placeholder="Answer 1" type="text">{{ exam[0]["answers"][exam[0]["questions"][row]][0] }}</textarea>
                </div>
                <div class="answer">
                    <textarea onclick="copy('answer{{row+1}}-2')" readonly cols="31" class="form-control mx-auto w-auto" id="answer{{row+1}}-2" name="answer{{row+1}}-2" placeholder="Answer 2" type="text">{{ exam[0]["answers"][exam[0]["questions"][row]][1] }}</textarea>
                </div>
            </div>
            <div class="answerrow">
                <div class="answer">
                    <textarea onclick="copy('answer{{row+1}}-3')" readonly cols="31" class="form-control mx-auto w-auto" id="answer{{row+1}}-3" name="answer{{row+1}}-3" placeholder="Answer 3" type="text">{{ exam[0]["answers"][exam[0]["questions"][row]][2] }}</textarea>
                </div>
                <div class="answer">
                    <textarea onclick="copy('answer{{row+1}}-4')" readonly cols="31" class="form-control mx-auto w-auto" id="answer{{row+1}}-4" name="answer{{row+1}}-4" placeholder="Answer 4" type="text">{{ exam[0]["answers"][exam[0]["questions"][row]][3] }}</textarea>    
                </div>
            <div class="answerrow">
                <textarea cols="70" class="form-control mx-auto w-auto" id="rightanswer{{row+1}}" name="rightanswer{{row+1}}" placeholder="Paste the right answer here" type="text"></textarea>    
            </div>
            </div>
            <br>
            <script>
                const myText{{row+1}} = document.getElementById("question{{row+1}}");
                myText{{row+1}}.style.cssText = `height: ${myText{{row+1}}.scrollHeight}px; overflow-y: hidden`;

                myText{{row+1}}.addEventListener("input", function(){
                    this.style.height = "auto";
                    this.style.height = `${this.scrollHeight}px`;
                });
                
                const myText{{row+1}}1 = document.getElementById("answer{{row+1}}-1");
                myText{{row+1}}1.style.cssText = `height: ${myText{{row+1}}1.scrollHeight}px; overflow-y: hidden`;

                myText{{row+1}}1.addEventListener("input", function(){
                    this.style.height = "auto";
                    this.style.height = `${this.scrollHeight}px`;
                });
                const myText{{row+1}}2 = document.getElementById("answer{{row+1}}-2");
                myText{{row+1}}2.style.cssText = `height: ${myText{{row+1}}2.scrollHeight}px; overflow-y: hidden`;

                myText{{row+1}}2.addEventListener("input", function(){
                    this.style.height = "auto";
                    this.style.height = `${this.scrollHeight}px`;
                });
                const myText{{row+1}}3 = document.getElementById("answer{{row+1}}-3");
                myText{{row+1}}3.style.cssText = `height: ${myText{{row+1}}3.scrollHeight}px; overflow-y: hidden`;

                myText{{row+1}}3.addEventListener("input", function(){
                    this.style.height = "auto";
                    this.style.height = `${this.scrollHeight}px`;
                });
                const myText{{row+1}}4 = document.getElementById("answer{{row+1}}-4");
                myText{{row+1}}4.style.cssText = `height: ${myText{{row+1}}4.scrollHeight}px; overflow-y: hidden`;

                myText{{row+1}}4.addEventListener("input", function(){
                    this.style.height = "auto";
                    this.style.height = `${this.scrollHeight}px`;
                });
                const rightAnswer{{row+1}} = document.getElementById("rightanswer{{row+1}}");
                rightAnswer{{row+1}}.style.cssText = `height: ${rightAnswer{{row+1}}.scrollHeight}px; overflow-y: hidden`;

                rightAnswer{{row+1}}.addEventListener("input", function(){
                    this.style.height = "auto";
                    this.style.height = `${this.scrollHeight}px`;
                });

                function copy(id) {
                    let textarea = document.getElementById(id);
                    textarea.select();
                    document.execCommand("copy");
                  }
            </script>
        {% endfor %}
        <button class="btn btn-primary" type="submit">Submit Answers</button>
    </form>
{% endblock %}